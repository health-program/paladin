<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:include="/health/header" />

<body>
	<tt:constant enumcode="publicity-material-type" />
	<section class="content-header">
		<h1>健康教育宣传资料管理</h1>
		<ol class="breadcrumb">
			<li><a href="/health/publicity/material/index"><i class="fa fa-list-alt"></i>资料列表</a></li>
			<li class="active">资料详情</li>
		</ol>
	</section>
	<section class="content">
		<div class="box box-solid">
			<div class="box-header with-border">
				<i class="glyphicon glyphicon-user"></i>
				<h3 class="box-title">资料详情</h3>
				<div class="box-tools pull-right">
					<a class="btn" id="model_edit_btn" href="javascript:void(0)"><i class="fa fa-edit"></i>编辑</a>
				</div>
			</div>
			<div id="model_view" class="box-body">
				<form class="form-horizontal">
					<div class="form-group">
						<label for="workCycle" class="col-sm-3 control-label">工作周期：</label>
						<div class="col-sm-3">
							<p name="workCycle" class="form-control-static description"></p>
						</div>
						<label for="date" class="col-sm-2 control-label">日期：</label>
						<div class="col-sm-3">
							<p name="date" class="form-control-static description"></p>
						</div>
					</div>
					<div class="form-group">
						<label for="agencyId" class="col-sm-3 control-label">所属机构：</label>
						<div class="col-sm-3">
							<p name="agencyName" class="form-control-static description"></p>
						</div>
						<label for="count" class="col-sm-2 control-label">数量：</label>
						<div class="col-sm-3">
							<p name="count" class="form-control-static description"></p>
						</div>
					</div>
					<div class="form-group">
						<label for="type" class="col-sm-3 control-label">健康教育宣传资料类型：</label>
						<div class="col-sm-3">
							<p name="type" class="form-control-static description text-muted"></p>
						</div>
						<label for="compileIssueUnit" class="col-sm-2 control-label">编发单位：</label>
						<div class="col-sm-3">
							<p name="compileIssueUnit"
								class="form-control-static description"></p>
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="col-sm-3 control-label">健康教育宣传资料名称：</label>
						<div class="col-sm-3">
							<p name="name" class="form-control-static description"></p>
						</div>
						<label for="remarks" class="col-sm-2 control-label">备注：</label>
						<div class="col-sm-3">
							<p name="remarks" class="form-control-static description"></p>
						</div>
					</div>
					<div class="form-group" id="attachments">
						<label for="attachments" class="col-sm-3 control-label">附件：</label>
						<div name="attachments" class="col-sm-8">
						</div>
					</div>
				</form>
			</div>
			<div id="model_edit" class="box-body" style="display: none;">
				<form id="model_form" action="/health/publicity/material/update" method="post" class="form-horizontal edit-body">
					<div class="form-group">
						<label for="workCycle" class="col-sm-3 control-label"><i class="required-label fa fa-asterisk"></i>工作周期：</label>
						<div class="col-sm-3">
							<input name="workCycle" required="required" type="text" placeholder="请输入工作周期"
								class="form-control tonto-datepicker-year" autocomplete="off" />
						</div>
						<label for="date" class="col-sm-2 control-label"><i class="required-label fa fa-asterisk"></i>日期：</label>
						<div class="col-sm-3">

							<input name="date" required="required" type="text" placeholder="请输入日期"
								class="form-control tonto-datepicker-date" autocomplete="off" />

						</div>
					</div>
					<div class="form-group">
						<label for="agencyId" class="col-sm-3 control-label"><i class="required-label fa fa-asterisk"></i>所属机构：</label>
						<div class="col-sm-3">
							<select name="agencyId" class="form-control">
                                  <option th:each="agency : ${agencyList}" th:value="${agency.Id}"
                                  th:selected="${agencyId == agency.Id}"
                                  th:text="${agency.name}"></option>
                            </select>
						</div>
						<label for="count" class="col-sm-2 control-label"><i class="required-label fa fa-asterisk"></i>数量：</label>
						<div class="col-sm-3">
							<input name="count" required="required" placeholder="请输入数量" type="text"
								class="form-control" autocomplete="off">
						</div>
					</div>
					<div class="form-group">
						<label for="type" class="col-sm-3 control-label"><i class="required-label fa fa-asterisk"></i>健康教育宣传资料类型：</label>
						<div class="col-sm-3">
							<select name="type" class="form-control tonto-select-constant"
								enumcode="publicity-material-type">
							</select>
						</div>
						<label for="compileIssueUnit" class="col-sm-2 control-label"><i class="required-label fa fa-asterisk"></i>编发单位：</label>
						<div class="col-sm-3">
							<input name="compileIssueUnit" required="required" placeholder="请输入编发单位" type="text"
								class="form-control" autocomplete="off">
						</div>
					</div>
					<div class="form-group">
						<label for="name" class="col-sm-3 control-label"><i class="required-label fa fa-asterisk"></i>健康教育宣传资料名称：</label>
						<div class="col-sm-3">
							<input name="name" required="required" placeholder="请输入健康教育宣传资料名称" type="text"
								class="form-control" autocomplete="off">
						</div>
						<label for="remarks" class="col-sm-2 control-label">备注：</label>
						<div class="col-sm-3">
							<input name="remarks" placeholder="请输入备注" type="text"
								class="form-control">
						</div>
					</div>
					<div class="form-group">
						<label for="attachmentFiles" class="col-sm-3 control-label">附件：</label>
						<div class="col-sm-8" name="attachments">
							<input type="file" name="attachmentFiles" multiple>
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-2 col-sm-offset-3">
							<button type="submit" id="model_form_submit_btn"
								class="btn btn-primary btn-block">保存</button>
						</div>
						<div class="col-sm-2 col-sm-offset-1">
							<button type="button" id="model_form_cancel_btn"
								class="btn btn-default btn-block">取消</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</section>
	<div class="col-sm-2 col-sm-offset-5 btn-back">
		<a  href="/health/publicity/material/index" class="btn btn-primary btn-block">返回</a>
	</div>
	<input type="hidden" id="id" th:value="${id}" />
	<div th:include="/health/footer" />
	<script type="text/javascript">
	var options = {
			id : "model",
			name : "详情",
			url : "/health/publicity/material/update?id=" + $("#id").val(),
			columns : [ 
			            {title : "工作周期", name : "workCycle", inputType : "TEXT"},
			            {title : "日期", name : "date", inputType : "DATE"},
			            {title : "所属机构", name : "agencyName", inputType : "TEXT"},
			            {title : "机构id", name : "agencyId", inputType : "TEXT"},
			            {title : "数量", name : "count", inputType : "TEXT"},
			            {title : "健康教育宣传资料类型", name : "type", enum : "publicity-material-type", inputType : "SELECT"},
			            {title : "编发单位", name : "compileIssueUnit", inputType : "TEXT"}, 
			            {title : "健康教育宣传资料名称", name : "name", inputType : "TEXT"},
			            {title : "备注", name : "remarks", inputType : "TEXT"},
						{ title: "附件", name: "attachments", inputType: "ATTACHMENT", fileName: "attachmentFiles" }
			           ]
					}
			$(function() {
				var model = new tonto.Model("model", options.columns, {
				successCallback : function() {
					$.successAlert("保存成功", function() {
						window.location = "/health/publicity/material/index";
					});
				},
		          extraParam: function() {
		              return {
		                  id: $("#id").val() || "",
		              }
		          }
				});
			$.getAjax("/health/publicity/material/get?id=" + $("#id").val(),
					function(data) {
						model.setData(data);
				});
			});
	</script>
</body>

</html>