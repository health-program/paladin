<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>宣教系统</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport" />
    <link rel="stylesheet" href="/static/assets/bootstrap3/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/static/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="/static/css/ionicons.min.css"/>
    <link rel="stylesheet" href="/static/css/iconfont.css"/>
    <link rel="stylesheet" href="/static/css/AdminLTE.min.css"/>
    <link rel="stylesheet" href="/static/css/skins/skin-green-light.min.css"/>
    <style type="text/css">
    .video-list {
        list-style: none;
        text-align: center;
    }

    .right-tool {
        float: right;
    }

    .list {
        list-style: none;
        float: left;
        text-align: center;
        width: 23%
    }

    .right-text {
        display: inline;
        float: right;
    }

    .name-box {
        display: inline-block;
        height: 54px;
        width: 140px;
    }

    .fa-check-square-o {
        font-size: 54px;
    }

    .p1 {
        color: #666666;
        font-size: 14px;
        line-height: 18px;
    }

    .p2 {
        color: #666666;
        line-height: 20px;
        font-size: 22px;
    }

    .go-todo-btn {
        padding
    }

    .name {
        color: #000;
    }

    .name:hover,
    .name:active,
    .name:focus {
        color: #000;
        text-decoration: underline
    }

    .btn-primary {
        background-color: #00a65a;
        border-color: #00a65a
    }

    .btn-primary:hover {
        background-color: #1ddc50;
        border-color: #1ddc50
    }

    .video-li {
        margin-bottom: 20px;
        float: left;
        width: 32%;
    }

    .notice-box {
        display: inline-block;
        width: 76%;
        text-align: left;
        text-height: 200px;
        padding-left: 20px;
        vertical-align: top;
    }

    #noticeContent {
        height: 70px;
        overflow: hidden;
        font-size: 15px;
        padding-top: 5px;
        /* 内容超出宽度时隐藏超出部分的内容 */
        text-overflow: ellipsis;
        /* 当对象内文本溢出时显示省略标记(...) ；需与overflow:hidden;一起使用。*/
    }

    .btn-detail {
        margin-top: 15px;
        border: none;
        float: right;
        color: #3c8dbc
    }

    .block {
        padding: 20px;
        padding-right: 50px;
        padding-left: 50px;
    }

    .sli {
        margin-top: 20px;
    }
    </style>
</head>

<body class="layout-top-nav skin-green-light">
    <div class="wrapper">
        <div th:include="/health/open/open_top" />
        <!-- Full Width Column -->
        <div class="content-wrapper">
            <div class="container">
                <div class="box box-solid" style="margin-top: 20px">
                    <div class="box-header with-border">
                        <h3 class="box-title">文章列表</h3>
                    </div>
                    <div id="body" class="box-body">
                        <div class="post" style="padding-right: 30px;padding-left: 30px" th:each="message,iter: ${messages}">
                            <img th:if="${message.thumbnailUrl!=null}" th:src="@{'/file/'+${message.thumbnailUrl.thumbnailPelativePath}}" alt="ATTACHMENT" style="width:20%">
                            <img  th:if="${message.thumbnailUrl==null}" src="/static/image/health/article.png" alt="ATTACHMENT" style="width:20%">
                            <div class="notice-box">
                                <div>
                                    <h4><a th:href="${'/open/health/message/center/display/index?id='+ message.id}"><strong th:text="${message.title}"></strong></a></h4>
                                </div>
                                <div style="font-size:10px; color:#999">
                                    <span th:text="${#dates.format(message.publishTime, 'yyyy-MM-dd')}"></span><span>&nbsp;&nbsp;|&nbsp;&nbsp;关键词&nbsp;&nbsp;</span>
                                    <span th:text="${message.label}"></span>
                                </div>
                                <div id="noticeContent" th:utext="${message.summary}"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <input type="hidden" id="total" th:value="${total}">
            <input type="hidden" id="page" th:value="${page}">
            <input type="hidden" id="limit" th:value="${limit}">
        </div>
        <script type="text/javascript" src="/static/assets/jquery/jquery-2.2.4.min.js"></script>
        <script type="text/javascript" src="/static/assets/bootstrap3/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/static/assets/adminLTE/js/adminlte.min.js"></script>
        <script type="text/javascript">
        /*<![CDATA[*/
        var table;
        $(function() {
            initDataGrid();
        });

        function initDataGrid() {
            var limit = $("#limit").val() * 1,
                total = $("#total").val() * 1,
                page = $("#page").val() * 1,
                t = 5;


            if (total > limit) {
                var totalPage = Math.ceil(total / limit);
                var html = '<div class="text-center"><ul class="pagination">';
                html += page > 1 ? '<li><a href="/open/health/message/center/video/index?offset=' + ((page - 2) * limit) + '">&laquo;</a></li>' : '<li><a href="javascript:void(0)">&laquo;</a></li>';

                var i = page - Math.floor(t / 2);
                if (i < 1) i = 1;
                if (i > totalPage) i = totalPage;

                for (var k = 0; i <= totalPage && k < t; k++) {
                    html += '<li ' + (i == page ? 'class="active"' : '') + '><a href="/open/health/message/center/video/index?offset=' + ((i - 1) * limit) + '">' + i + '</a></li>';
                    i++;
                }

                html += page < totalPage ? '<li><a href="/open/health/message/center/video/index?offset=' + (page * limit) + '">&raquo;</a></li>' : '<li><a href="javascript:void(0)">&raquo;</a></li>';
                html += '</ul></div>';
                $("#body").append(html);
            }

        }

        /*]]>*/
        </script>
</body>

</html>