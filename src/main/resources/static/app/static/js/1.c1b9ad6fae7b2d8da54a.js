webpackJsonp([1],{cpjO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),s=a.n(n),i=a("exGp"),r=a.n(i),o=a("dhIU"),l=a.n(o),u={name:"announce",data:function(){return{detailURL:"/announceDetail",announceList:[],loading:!1,finished:!1,isLoading:!1,searchShow:!0,pageNum:1,offset:0,totalPage:0,label:""}},methods:{getImgURL1:function(e){var t=l.a.API_ROOT;return t=t.replace('"',""),e?t+"/file/"+e:t+"/static/imgs/error.png"},search:function(){var e=this;return r()(s.a.mark(function t(){var a,n,i,r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e).pageNum=1,n={offset:8*(a.pageNum-1),label:a.label},t.next=5,e.$http.get(e.$HOST+"/open/health/message/center/message/search/find",n);case 5:if(0!=(i=t.sent).result.total){t.next=10;break}a.announceList=[],t.next=19;break;case 10:if(r=i.result.data,i.result){for(o=0;o<r.length;o++)null==r[o].thumbnailUrl&&(r[o].thumbnailUrl="/static/imgs/error.png");a.announceList=r}if(a.pageNum=i.result.page,a.totalPage=Math.ceil(i.result.total/i.result.limit),!(i.result.total<8)){t.next=19;break}return a.finished=!0,a.isLoading=!1,a.loading=!1,t.abrupt("return",!1);case 19:case"end":return t.stop()}},t,e)}))()},init:function(){var e=this;return r()(s.a.mark(function t(){var a,n,i,r,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={offset:8*((a=e).pageNum-1)},t.next=4,e.$http.get(e.$HOST+"/open/health/message/center/app/messageList",n);case 4:if(0==(i=t.sent).result.messages.total?e.searchShow=!1:e.searchShow=!0,r=i.result.messages.data,i.result){for(o=0;o<r.length;o++)null==r[o].thumbnailUrl&&(r[o].thumbnailUrl="/static/imgs/error.png");a.announceList=r}if(a.pageNum=i.result.messages.page,a.totalPage=Math.ceil(i.result.messages.total/i.result.messages.limit),!(i.result.messages.total<8)){t.next=15;break}return a.finished=!0,a.isLoading=!1,a.loading=!1,t.abrupt("return",!1);case 15:case"end":return t.stop()}},t,e)}))()},concatData:function(){var e=this;return r()(s.a.mark(function t(){var a,n,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(a=e).pageNum+=1,n={offset:8*(a.pageNum-1)},t.next=5,e.$http.get(e.$HOST+"/open/health/message/center/app/messageList",n);case 5:if(!((i=t.sent).result.messages.total<8)){t.next=11;break}return a.finished=!0,a.isLoading=!1,a.loading=!1,t.abrupt("return",!1);case 11:a.announceList=a.announceList.concat(i.result.messages.data),a.loading=!1,a.pageNum>=a.totalPage&&(a.finished=!0);case 14:case"end":return t.stop()}},t,e)}))()},onRefresh:function(){var e=this,t=this;setTimeout(function(){e.$toast({message:"刷新成功",position:"bottom"}),t.isLoading=!1,t.pageNum=1,t.loading=!1,t.finished=!1,t.isLoading=!1,t.init()},500)},onLoad:function(){var e=this;setTimeout(function(){e.concatData()},500)}},created:function(){},mounted:function(){var e=this;return r()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.init();case 1:case"end":return t.stop()}},t,e)}))()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"announce"}},[a("new-announce-slider"),e._v(" "),a("div",{staticClass:"announce_list"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.searchShow,expression:"searchShow"}],staticClass:"search bar"},[a("div",{staticClass:"form"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.label,expression:"label"}],attrs:{placeholder:"请输入搜索",name:"cname",type:"text"},domProps:{value:e.label},on:{input:function(t){t.target.composing||(e.label=t.target.value)}}}),e._v(" "),a("span",{staticClass:"seahchspan",on:{click:function(t){e.search()}}},[e._v("搜索")])])]),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[a("van-list",{attrs:{finished:e.finished},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[a("ul",e._l(e.announceList,function(t,n){return a("li",{key:n,on:{click:function(a){e.$router.push({path:e.detailURL,query:{id:t.id}})}}},[a("div",{staticClass:"left"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.getImgURL(t.thumbnailUrl.thumbnailPelativePath),expression:"getImgURL(item.thumbnailUrl.thumbnailPelativePath)"}],on:{click:function(a){e.$router.push({path:e.detailURL,query:{id:t.id}})}}})]),e._v(" "),a("div",{staticClass:"right"},[a("h3",{staticClass:"tit text-overflow",on:{click:function(a){e.$router.push({path:e.detailURL,query:{id:t.id}})}}},[e._v("\n                "+e._s(t.title)+"\n              ")]),e._v(" "),a("div",{staticClass:"con con-overflow",domProps:{innerHTML:e._s(t.content)}},[e._v(e._s(t.content))]),e._v(" "),a("p",{staticClass:"date"},[e._v(e._s(e.timeStamp(t.publishTime)))])])])}))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.finished,expression:"finished"}],staticClass:"no_more"},[e._v("没有更多了......")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(u,c,!1,function(e){a("fcvA")},"data-v-34c38f24",null);t.default=d.exports},fcvA:function(e,t){}});
//# sourceMappingURL=1.c1b9ad6fae7b2d8da54a.js.map