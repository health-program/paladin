webpackJsonp([2],{cpjO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Xxa5"),s=n.n(a),i=n("exGp"),o=n.n(i),r={name:"announce",data:function(){return{detailURL:"/announceDetail",announceList:[],loading:!1,finished:!1,isLoading:!1,pageNum:1,offset:0,totalPage:0}},methods:{init:function(){var e=this;return o()(s.a.mark(function t(){var n,a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={offset:8*((n=e).pageNum-1)},t.next=4,e.$http.get(e.$HOST+"/open/health/message/center/app/messageList",a);case 4:i=t.sent,n.announceList=i.result.messages.data,n.pageNum=i.result.messages.page,n.totalPage=Math.ceil(i.result.messages.total/i.result.messages.limit),i.result.messages.total<8&&(n.finished=!0,n.isLoading=!1,n.loading=!1);case 9:case"end":return t.stop()}},t,e)}))()},concatData:function(){var e=this;return o()(s.a.mark(function t(){var n,a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e).pageNum+=1,a={offset:8*(n.pageNum-1)},t.next=5,e.$http.get(e.$HOST+"/open/health/message/center/app/messageList",a);case 5:if(!((i=t.sent).result.messages.total<8)){t.next=11;break}return n.finished=!0,n.isLoading=!1,n.loading=!1,t.abrupt("return",!1);case 11:n.announceList=n.announceList.concat(i.result.messages.data),n.loading=!1,n.pageNum>=n.totalPage&&(n.finished=!0);case 14:case"end":return t.stop()}},t,e)}))()},onRefresh:function(){var e=this,t=this;setTimeout(function(){e.$toast({message:"刷新成功",position:"bottom"}),t.isLoading=!1,t.pageNum=1,t.loading=!1,t.finished=!1,t.isLoading=!1,t.init()},500)},onLoad:function(){var e=this;setTimeout(function(){e.concatData()},500)}},created:function(){this.init()}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"announce"}},[n("new-announce-slider"),e._v(" "),n("div",{staticClass:"announce_list"},[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[n("van-list",{attrs:{finished:e.finished},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},[n("ul",e._l(e.announceList,function(t,a){return n("li",{key:a},[n("div",{staticClass:"left"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.getImgURL(t.thumbnailUrl),expression:"getImgURL(item.thumbnailUrl)"}],on:{click:function(n){e.$router.push({path:e.detailURL,query:{id:t.id}})}}})]),e._v(" "),n("div",{staticClass:"right"},[n("h3",{staticClass:"tit text-overflow",on:{click:function(n){e.$router.push({path:e.detailURL,query:{id:t.id}})}}},[e._v("\n                "+e._s(t.title)+"\n              ")]),e._v(" "),n("div",{staticClass:"con con-overflow",domProps:{innerHTML:e._s(t.content)}},[e._v(e._s(t.content))]),e._v(" "),n("p",{staticClass:"date"},[e._v(e._s(e.getYMD(t.publishTime)))])])])}))]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.finished,expression:"finished"}],staticClass:"no_more"},[e._v("没有更多了......")])],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(r,u,!1,function(e){n("vvPs")},"data-v-36a4b732",null);t.default=c.exports},vvPs:function(e,t){}});
//# sourceMappingURL=2.953cf4a7eeae541f3a86.js.map